{% extends 'blog/blog_layout.html' %}

{% block navbar %}
  <div class="row">
      <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
          <div class="nav-scroller py-1 mb-2 ">
              <nav class="nav d-flex justify-content-between">
                  {% for category in categories %}
                  <a class="p-2 link-secondary" href="{{ url_for('blog.post_per_category', category_name=category.category_name.replace(' ', '-'))}}">
                      {{ category.category_name }}
                  </a>
                  {% endfor %}
              </nav>
          </div>
      </div>
  </div>
{% endblock navbar %}

{% block banner %}
    <div class="container">
        <!-- Publications à afficher dans la bannière -->
        <div class="p-4 p-md-5 mb-4 text-white rounded" style="background-color: #726a95;">
          <div class="row mb-3">
            {% if post_banner %}
                <div class="col-xs-12 col-sm-12 col-md-5 col-lg-5 px-0">
                    <h1 class="display-4" style="font-size: 40px;">{{ post_banner.title }}</h1>
                    <p class="lead mb-3">
                        <a href="{{ url_for('blog.post', post_title=post_banner.title.replace(' ', '-')) }}" class="text-white fw-bold ">
                            Lire la suite...
                        </a>
                    </p>
                </div>
                <div class="col-xs-12 col-sm-12 col-md-1 col-lg-1"></div>
                <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 px-0">
                    {% for img in images %}
                        {% if img == post_banner.img_title %}
                            <img src="{{ url_for('static', filename='upload/'+ img) }}" alt="" class="img-fluid post-thumb rounded d-flex flex-sm-row flex-md-row">
                        {% endif %}
                    {% endfor %}
                </div>
            {% endif %}
        </div>
      </div>
    </div>
{% endblock banner %}


{% block content %}
    <main class="container d-grid gap-3 mb-5">
            <div class="row mb-4">
                <div class="col-md-11">
                  <h2 class="ms-3 pt-5 my-2" style="font-size: 30px; font-weight: bold; letter-spacing:1.2px;">
                    Quoi de neuf ?
                  </h2>
                </div>
            </div>
            <!-- Publications à afficher dans des cartes -->
            <div class="row mb-5">
            <!-- Derniere Publication Business -->
            <div class="col-md-3">
              <div class="row g-0 border-none rounded overflow-hidden flex-md-row mb-4 shadow-sm h-md-250 position-relative">
                <div class="col py-3 px-3 d-flex flex-column position-static ">
                    {% for category in categories %}
                        {% if post_business.category_id == category.id %}
                            <strong class="d-inline-block mb-2 text-{{ category.color }}" style="font-size: 17px;">
                            {{ category.category_name }}
                            </strong>
                            <h6 class="mb-3">{{ post_business.title }}</h6>
                            <a href="{{ url_for('blog.post', post_title=post_business.title.replace(' ', '-')) }}" class="stretched-link text-{{category.color}}" >
                            Lire l'article
                            </a>
                        {% endif %}
                    {% endfor %}
                </div>
                <div class="col-auto d-none d-lg-block d-flex d-sm-flex d-md-flex" style="width: 200px;">
                    {% for img in images %}
                        {% if img %}
                            {% if img == post_business.img_title %}
                                <img src="{{ url_for('static', filename='upload/'+ img) }}" alt="" class="img-fluid post-thumb w-100 d-sm-flex d-md-flex">
                            {% endif %}
                        {% endif %}
                    {% endfor %}
                </div>
              </div>
            </div>

            <!-- Derniere Publication Formation -->
            <div class="col-md-3">
              <div class="row g-0 border-none rounded overflow-hidden flex-md-row mb-4 shadow-sm h-md-250 position-relative">
                <div class="col py-3 px-3 d-flex flex-column position-static ">
                    {% for category in categories %}
                        {% if post_formation.category_id == category.id %}
                            <strong class="d-inline-block mb-2 text-{{ category.color }}" style="font-size: 17px;">
                            {{ category.category_name }}
                            </strong>
                            <h6 class="mb-3">{{ post_formation.title }}</h6>
                            <a href="{{ url_for('blog.post', post_title=post_formation.title.replace(' ', '-')) }}" class="stretched-link text-{{category.color}}" >
                            Lire l'article
                            </a>
                        {% endif %}
                    {% endfor %}
                </div>
                <div class="col-auto d-none d-lg-block d-flex d-sm-flex d-md-flex" style="width: 200px;">
                    {% for img in images %}
                        {% if img %}
                            {% if img == post_formation.img_title %}
                                <img src="{{ url_for('static', filename='upload/'+ img) }}" alt="" class="img-fluid post-thumb w-100 d-sm-flex d-md-flex">
                            {% endif %}
                        {% endif %}
                    {% endfor %}
                </div>
              </div>
            </div>
            <!-- Derniere Publication Tutoriel -->
            <div class="col-md-3">
              <div class="row g-0 border-none rounded overflow-hidden flex-md-row mb-4 shadow-sm h-md-250 position-relative">
                <div class="col py-3 px-3 d-flex flex-column position-static ">
                    {% for category in categories %}
                        {% if post_tutoriel.category_id == category.id %}
                            <strong class="d-inline-block mb-2 text-{{ category.color }}" style="font-size: 17px;">
                            {{ category.category_name }}
                            </strong>
                            <h6 class="mb-3">{{ post_tutoriel.title }}</h6>
                            <a href="{{ url_for('blog.post', post_title=post_tutoriel.title.replace(' ', '-')) }}" class="stretched-link text-{{category.color}}" >
                            Lire l'article
                            </a>
                        {% endif %}
                    {% endfor %}
                </div>
                <div class="col-auto d-none d-lg-block d-flex d-sm-flex d-md-flex" style="width: 200px;">
                    {% for img in images %}
                        {% if img %}
                            {% if img == post_tutoriel.img_title %}
                                <img src="{{ url_for('static', filename='upload/'+ img) }}" alt="" class="img-fluid post-thumb w-100 d-sm-flex d-md-flex">
                            {% endif %}
                        {% endif %}
                    {% endfor %}
                </div>
              </div>
            </div>

            <!-- Derniere Publication Ressources -->
            <div class="col-md-3">
              <div class="row g-0 border-none rounded overflow-hidden flex-md-row mb-4 shadow-sm h-md-250 position-relative">
                <div class="col py-3 px-3 d-flex flex-column position-static ">
                    {% for category in categories %}
                        {% if post_ressource.category_id == category.id %}
                            <strong class="d-inline-block mb-2 text-{{ category.color }}" style="font-size: 17px;">
                            {{ category.category_name }}
                            </strong>
                            <h6 class="mb-3">{{ post_ressource.title }}</h6>
                            <a href="{{ url_for('blog.post', post_title=post_ressource.title.replace(' ', '-')) }}" class="stretched-link text-{{category.color}}" >
                            Lire l'article
                            </a>
                        {% endif %}
                    {% endfor %}
                </div>
                <div class="col-auto d-none d-lg-block d-flex d-sm-flex d-md-flex" style="width: 200px;">
                    {% for img in images %}
                        {% if img %}
                            {% if img == post_ressource.img_title %}
                                <img src="{{ url_for('static', filename='upload/'+ img) }}" alt="" class="img-fluid post-thumb w-100 d-sm-flex d-md-flex">
                            {% endif %}
                        {% endif %}
                    {% endfor %}
                </div>
              </div>
            </div>

        <div class="row mb-4">
            <div class="col-md-11">
                <h2 class="my-5" style="font-size: 28px; font-weight: bold; letter-spacing:1.2px;">
                    Article à la une
                </h2>
            </div>
        </div>
      <div class="row">
        <div class="col-md-8">
            <!-- Publication à afficher à l'écran d'accueil  -->
            {% if last_post %}
                <article class="blog-post">
                    <h3 class="blog-post-title mb-3">
                        {{ last_post.title }}
                    </h3>
                    <p class="blog-post-meta">
                        <small style="font-size: 16px;" class="text-muted">
                            <span class="iconify me-2 mb-2" data-icon="ant-design:calendar-outlined" data-inline="false">
                            </span>
                            {{ last_post.date_posted.strftime('%d/%m/%Y') }} à {{ last_post.date_posted.strftime('%H:%M') }} par
                            {% for moderator in moderators %}
                              {% if moderator.id == last_post.moderator_id %}
                                <span class="iconify ms-2 me-2 mb-2" data-icon="bi:person-fill" data-inline="false"></span>
                                {{ moderator.username }}
                              {% endif %}
                            {% endfor %}
                        </small>
                    </p>

                    <div class="col-auto d-lg-block d-flex d-sm-flex d-md-flex" >
                        {% for img in images %}
                            {% if img == last_post.img_title %}
                                <img src="{{ url_for('static', filename='upload/'+ img) }}" alt="" class="img-fluid post-thumb rounded w-75 d-flex d-sm-flex d-md-flex">
                            {% endif %}
                        {% endfor %}
                    </div>
                    <br>
                    <p class="mt-3">{{ last_post.introduction }}</p>
                    <br>
                    <blockquote>
                      <p>{{ last_post.p_intro }}</p>
                    </blockquote>
                    <br>
                    <div class="col-auto d-lg-block d-flex d-sm-flex d-md-flex">
                        {% if last_post.img_h1 %}
                            <img src="{{ url_for('static', filename='upload/'+ last_post.img_h1) }}" alt="" class="img-fluid post-thumb w-50 d-sm-flex d-md-flex">
                        {% endif %}
                    </div>
                    {% if last_post.h1 != "" %}
                      <h3 class="my-4">{{ last_post.h1 }}</h3>
                      <p>
                          {{ last_post.p_h1 }}
                      </p>
                    <br>
                    {% endif %}
                    <br>
                    <!-- sub_title 2 -->
                    <div class="col-auto d-lg-block d-flex d-sm-flex d-md-flex">
                        {% if last_post.img_h2 %}
                            <img src="{{ url_for('static', filename='upload/'+ last_post.img_h2) }}" alt="" class="img-fluid post-thumb w-50 d-sm-flex d-md-flex">
                        {% endif %}
                    </div>
                     {% if last_post.h2 != "" %}
                        <br>
                        <h4 class="mb-4">{{ last_post.h2}}</h4>
                        <p>
                            {{ last_post.p_h2 }}
                        </p>
                    <br>
                    {% endif %}
                    <!-- sub_title 3 -->
                    <br>
                    <div class="col-auto d-lg-block d-flex d-sm-flex d-md-flex">
                        {% if last_post.img_h3 %}
                            <img src="{{ url_for('static', filename='upload/'+ last_post.img_h3) }}" alt="" class="img-fluid post-thumb w-50 d-sm-flex d-md-flex">
                        {% endif %}
                    </div>
                    {% if last_post.h3 != "" %}
                        <br>
                        <h4 class="mb-4">{{ last_post.h3 }}</h4>
                        <p>
                            {{ last_post.p_h3 }}
                        </p>
                    <br>
                    {% endif %}
                    <!-- sub_title 4 -->
                    <br>
                    <div class="col-auto d-lg-block d-flex d-sm-flex d-md-flex">
                        {% if last_post.img_h4 %}
                            <img src="{{ url_for('static', filename='upload/'+ last_post.img_h4) }}" alt="" class="img-fluid post-thumb w-50 d-sm-flex d-md-flex">
                        {% endif %}
                    </div>
                    {% if last_post.h4 != "" %}
                        <br>
                        <h4 class="mb-4">{{ last_post.h4 }}</h4>
                        <p>
                            {{ last_post.p_h4 }}
                        </p>
                    <br>
                    {% endif %}
                    <!-- sub_title 5 -->
                    <br>
                    <div class="col-auto d-lg-block d-flex d-sm-flex d-md-flex">
                        {% if last_post.img_h5 %}
                            <img src="{{ url_for('static', filename='upload/'+ last_post.img_h5) }}" alt="" class="img-fluid post-thumb w-50 d-sm-flex d-md-flex">
                        {% endif %}
                    </div>
                    {% if last_post.h5 != "" %}
                        <br>
                        <h4 class="mb-4">{{ last_post.h5 }}</h4>
                        <p>
                            {{ last_post.p_h5 }}
                        </p>
                    <br>
                    {% endif %}
                    <!-- sub_title 6 -->
                    <br>
                    <div class="col-auto d-lg-block d-flex d-sm-flex d-md-flex">
                        {% if last_post.img_h6 %}
                            <img src="{{ url_for('static', filename='upload/'+ last_post.img_h6) }}" alt="" class="img-fluid post-thumb w-50 d-sm-flex d-md-flex">
                        {% endif %}
                    </div>
                    {% if last_post.h6 != "" %}
                        <br>
                        <h4 class="mb-4">{{ last_post.h6 }}</h4>
                        <p>
                            {{ last_post.p_h6 }}
                        </p>
                    <br>
                    {% endif %}
                    <!-- sub_title 7 -->
                    <br>
                    <div class="col-auto d-lg-block d-flex d-sm-flex d-md-flex">
                        {% if last_post.img_h7 %}
                            <img src="{{ url_for('static', filename='upload/'+ last_post.img_h7) }}" alt="" class="img-fluid post-thumb w-50 d-sm-flex d-md-flex">
                        {% endif %}
                    </div>
                    {% if last_post.h7 != "" %}
                        <br>
                        <h4 class="mb-4">{{ last_post.h7 }}</h4>
                        <p>
                            {{ last_post.p_h7 }}
                        </p>
                    <br>
                    {% endif %}
                    <!-- sub_title 8 -->
                    <br>
                    <div class="col-auto d-lg-block d-flex d-sm-flex d-md-flex">
                        {% if last_post.img_h8 %}
                            <img src="{{ url_for('static', filename='upload/'+ last_post.img_h8) }}" alt="" class="img-fluid post-thumb w-50 d-sm-flex d-md-flex">
                        {% endif %}
                    </div>
                    {% if last_post.h8 != "" %}
                        <br>
                        <h4 class="mb-4">{{ last_post.h8 }}</h4>
                        <p>
                            {{ last_post.p_h8 }}
                        </p>
                    <br>
                    {% endif %}
                    <!-- sub_title 9 -->
                    <br>
                    <div class="col-auto d-lg-block d-flex d-sm-flex d-md-flex">
                        {% if last_post.img_h9 %}
                            <img src="{{ url_for('static', filename='upload/'+ last_post.img_h9) }}" alt="" class="img-fluid post-thumb w-50 d-sm-flex d-md-flex">
                        {% endif %}
                    </div>
                    {% if last_post.h9 != "" %}
                        <br>
                        <h4 class="mb-4">{{ last_post.h9 }}</h4>
                        <p>
                            {{ last_post.p_h9 }}
                        </p>
                    <br>
                    {% endif %}
                    <!-- sub_title 10 -->
                    <br>
                    <div class="col-auto d-lg-block d-flex d-sm-flex d-md-flex">
                        {% if last_post.img_h10 %}
                            <img src="{{ url_for('static', filename='upload/'+ last_post.img_h10) }}" alt="" class="img-fluid post-thumb w-50 d-sm-flex d-md-flex">
                        {% endif %}
                    </div>
                    {% if last_post.h10 != "" %}
                        <br>
                        <h4 class="mb-4">{{ last_post.h10 }}</h4>
                        <p>
                            {{ last_post.p_h10 }}
                        </p>
                    <br>
                    {% endif %}
                    <!-- Conclusion -->
                    <br>
                    <h4 class="mb-4">{{ last_post.conclusion }}</h4>
                    <p>
                        {{ last_post.p_conclusion }}
                    </p>
                </article><!-- /.blog-post -->
            {% endif %}
        </div>
        <div class="col-md-1"></div>
          <!-- ASIDE -->
        <div class="col-md-3">
          <div class="p-4">
            <h5 class="font-bold" style="font-size: 19px;">Dans la meme categorie</h5>
            <ul class="mb-0" >
                {% for post in posts_to_display %}
                    {% if last_post.category_id == post.category_id %}
                        {% if last_post.title != post.title %}
                            <li>
                                <a href="{{ url_for('blog.post', post_title=post.title.replace(' ', '-')) }}" style="text-decoration:none;" class="link-success">
                                    {{ post.title }}
                                </a>
                            </li>
                        {% endif %}
                    {% endif %}
                {% endfor %}
            </ul>
          </div>

          <div class="p-4">
            <h5 class="font-bold" style="font-size: 19px;">Sur les réseaux sociaux</h5>
            <ul>
              <li><a href="#" style="text-decoration:none;" class="link-success">GitHub</a></li>
              <li><a href="#" style="text-decoration:none;" class="link-success">Twitter</a></li>
              <li><a href="#" style="text-decoration:none;" class="link-success">Facebook</a></li>
            </ul>
          </div>

          <div class="row">
            <div class="col-md-12 my-2 pb-2">
            </div>
          </div>
        </div>
      </div><!-- /.row -->

    </main><!-- /.container -->
{% endblock content %}